<div class="ht-topo-viewer">
  <div class="page-header">
    <div class="container">
      <h1>TOPO<small ng-click="stateMachine.next()">[[ stateMachine.current ]]</small></h1>
      <ht-topo-file-selector topos="topos"></ht-topo-file-selector>
    </div>
  </div>
  <div ht-selection-helper="envSelectionManager"
       selection-data="envCollection"
       selection-id-field="id">
  </div>
  <div ht-selection-helper="keySelectionManager"
       selection-data="keyCollection"
       selection-id-field="id">
  </div>
  
  <div class="drop-container">
    <accordion close-others="oneAtATime">
      <div class="container">
        <accordion-group heading="Environments" is-open="status.isFirstOpen" is-disabled="status.isFirstDisabled">
          <div class="nav-drop">

     <!--      <img  class="search-icon" src="/client/appearance/base/common/assets/search.svg" alt="search"> -->
            <ht-environment-nav groups="envGroups"
                                group-names="groupKeys"
                                selection-manager="envSelectionManager">
            </ht-environment-nav>

          </div>
        </accordion-group>
      </div>
    </accordion>
  </div>

  <div class="container">
    <div class="results-filter">
      <div class="checkbox">
        <label>
          <input type="checkbox" ng-model="showEmptyKeys">
          Show empty keys
        </label>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" ng-model="showDefaultValues">
          Show default values
        </label>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" ng-model="showExpandedValues">
          Show expanded values
        </label>
      </div>
    </div>
    
    <form class="navbar-form navbar-left results-search" role="search">
      <div class="form-group">
        <input type="text" class="form-control" placeholder="Search">
      </div>
      <!-- <button type="submit" class="btn btn-default">Submit</button> -->
    </form>

    <table ng-if="topos" class="table table-hover">
      <th>Key</th>
      <th ng-repeat="env in selectedEnvs">
        [[ env ]]
      </th>
      <tr ng-repeat="key in filteredKeys"
          ng-click="keySelectionManager.toggleSelectionById(key)"
          ng-class="{ 'selected': keySelectionManager.isIdSelected(key) }">
        <td>
          [[ key ]]
        </td>
        <td ng-repeat="env in selectedEnvs" ng-class="{ 'default-value': isDefaultValue(env, key) }">
          [[ getTopoValue(env, key) ]]
        </td>
      </tr>
    </table>
  </div>
</div>
